(this["webpackJsonpsparklearn-faucet"]=this["webpackJsonpsparklearn-faucet"]||[]).push([[0],{236:function(e,t,n){"use strict";(function(e,a){var s=n(237),i=n(72),r=n(5),c=n(6),o=n(13),u=n(12),p=n(20),l=n.n(p),d=n(58),b=n.n(d),m=(n(255),n(238)),y=n(241),f=n(7),h=n(566).default,w=function(t){Object(o.a)(d,t);var p=Object(u.a)(d);function d(e){var t;return Object(r.a)(this,d),(t=p.call(this,e)).state={balance:0,gas_price:0,input_address:"",success_text:"",success_hash:"",error_text:"",is_success:!1,is_error:!1},t}return Object(c.a)(d,[{key:"componentWillMount",value:function(){window.web3=Object(m.a)("https://ropsten.infura.io/v3/".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_INFURA_AK)),window.ethTx=n(585).Transaction,console.log(window.web3),this.initAndFetchBal([{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"burn",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"acceptOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"a",type:"uint256"},{name:"b",type:"uint256"}],name:"safeSub",outputs:[{name:"c",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"a",type:"uint256"},{name:"b",type:"uint256"}],name:"safeDiv",outputs:[{name:"c",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"},{name:"data",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"a",type:"uint256"},{name:"b",type:"uint256"}],name:"safeMul",outputs:[{name:"c",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"newOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"tokenAddress",type:"address"},{name:"tokens",type:"uint256"}],name:"transferAnyERC20Token",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"a",type:"uint256"},{name:"b",type:"uint256"}],name:"safeAdd",outputs:[{name:"c",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"tokenOwner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Burn",type:"event"}],"0x962D8c38D4088F3F62e70740df46dB214718a855"),this.fetchGasPrice()}},{key:"fetchGasPrice",value:function(){var e=this;h.get("https://ethgasstation.info/json/ethgasAPI.json").then((function(t){var n=window.web3.utils.fromWei(window.web3.utils.toWei((t.data.fastest/10).toString(),"gwei"),"ether");e.setState({gas_price:n})})).catch((function(e){console.log(e)}))}},{key:"initAndFetchBal",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new window.web3.eth.Contract(t,n);case 2:window.token=e.sent,this.fetchTokenBal("0xca84b6581d325e6a497d875c4ca093ac3ba2ccaf"),console.log(window.token);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchTokenBal",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.token.methods.balanceOf(t).call((function(e,t){e&&console.error("Error: ",e),n.setState({balance:window.web3.utils.fromWei(t,"ether")})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"estimateGasLimit",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Promise((function(e,s){var i=window.web3.utils.toHex(window.web3.utils.toWei(a,"ether")),r={from:t,to:window.token._address,data:window.token.methods.transfer(n,i).encodeABI()};window.web3.eth.estimateGas(r,(function(t,n){t&&s(t),e({gasLimit:n,data:r.data})}))})),e.next=3,s;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"sendFaucetToken",value:function(){var t=Object(i.a)(l.a.mark((function t(){var n,s=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({is_success:!1,is_error:!1,success_message:"",error_message:""}),""===this.state.input_address?this.setState({is_error:!0,error_message:"Please input all fields."}):window.web3.utils.isAddress(this.state.input_address)?(n=new e.from(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FAUCET_PK,"hex"),this.estimateGasLimit("0xca84b6581d325e6a497d875c4ca093ac3ba2ccaf",this.state.input_address,"10").then((function(e){window.web3.eth.getTransactionCount("0xca84b6581d325e6a497d875c4ca093ac3ba2ccaf","pending",(function(t,i){if(t)console.log(t),s.setState({is_error:!0,error_message:"Something has occurred. Please try again."});else{var r={from:"0xca84b6581d325e6a497d875c4ca093ac3ba2ccaf"};r.to=window.token._address,r.data=e.data,r.gasLimit=window.web3.utils.toHex(e.gasLimit),r.gasPrice=window.web3.utils.toHex(a.web3.utils.toWei(s.state.gas_price,"ether")),r.nonce=window.web3.utils.toHex(i),console.log(r);var c=new window.ethTx(r,{chain:"ropsten"});c.sign(n),console.log(c),window.web3.eth.sendSignedTransaction("0x".concat(c.serialize().toString("hex")),(function(e,t){e?console.log(e):(console.log(t.toString()),s.setState({input_address:"",is_success:!0,success_hash:t.toString(),success_message:"Sending 10 rSRK. Please wait for a few minutes."}))}))}})).catch((function(e){console.log(e),s.setState({is_error:!0,error_message:"Something has occurred. Please try again."})}))}))):this.setState({is_error:!0,error_message:"Invalid Address"});case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleInput",value:function(e,t){this.setState(Object(s.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"align-items-center justify-content-center",children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("div",{className:"card-header text-center",children:[Object(f.jsx)("img",{alt:"logo",className:"align-self-center",src:y.a,height:"69",width:"80"}),Object(f.jsx)("h3",{children:"SparkLearn EdTech rSRK Faucet"})]}),Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("center",{children:Object(f.jsxs)("small",{children:["Remaining faucet balance: ",this.state.balance," rSRK"]})}),Object(f.jsx)("br",{}),Object(f.jsx)("form",{children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"form-group col-12",children:Object(f.jsx)("input",{type:"name",value:this.state.input_address,className:"form-control",onChange:function(t){return e.handleInput("input_address",t)},placeholder:"Enter address to receive funds here"})}),Object(f.jsxs)("div",{className:"col-12",children:[this.state.is_success&&[Object(f.jsx)("br",{},0),Object(f.jsxs)("div",{className:"alert alert-success",children:[Object(f.jsx)("strong",{children:"Success!"})," "+this.state.success_message,Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:"https://ropsten.etherscan.io/tx/"+this.state.success_hash,target:"_blank",rel:"noreferrer",children:"https://ropsten.etherscan.io/tx/"+this.state.success_hash})]},1)],this.state.is_error&&[Object(f.jsx)("br",{},0),Object(f.jsxs)("div",{className:"alert alert-danger",children:[Object(f.jsx)("strong",{children:"Error!"})," ",this.state.error_message]},1)]]})]})})}),Object(f.jsx)("br",{}),Object(f.jsx)("center",{children:Object(f.jsx)("button",{className:"btn btn-primary",onClick:this.sendFaucetToken.bind(this),children:"Request 10 rSRK"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col-12",children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"alert alert-warning",children:[Object(f.jsx)("strong",{children:"Did not receive your rSRK?"}),Object(f.jsx)("br",{}),"EVM blockchains in general and Ropsten in particular are incredibly fragile, unreliable and hostile environments. Transactions do get lost, sometimes fail to mine, gas limits are estimated incorrectly, network explorer loses records, and Infura sometimes misreport nonces."]},1)]})})})]}),Object(f.jsx)("div",{className:"card-footer text-muted text-center",children:Object(f.jsxs)("small",{children:["\xa9 ",Object(f.jsx)("a",{href:"",target:"_blank",rel:"noreferrer",children:"SparkLearn EdTech Inc."})]})})]})]})})})}}]),d}(b.a.Component);t.a=w}).call(this,n(1).Buffer,n(14))},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(125),s=n.n(a),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!window.ethereum&&!e)throw new Error("no ethereum provider detected");return new s.a(e?new s.a.providers.HttpProvider(e):window.ethereum)}},241:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.f38acf77.png"},251:function(e,t,n){},255:function(e,t,n){},266:function(e,t){},274:function(e,t){},292:function(e,t){},294:function(e,t){},309:function(e,t){},310:function(e,t){},375:function(e,t){},377:function(e,t){},410:function(e,t){},412:function(e,t){},413:function(e,t){},418:function(e,t){},420:function(e,t){},426:function(e,t){},428:function(e,t){},441:function(e,t){},453:function(e,t){},456:function(e,t){},461:function(e,t){},475:function(e,t){},477:function(e,t){},587:function(e,t){},613:function(e,t,n){"use strict";n.r(t);var a=n(58),s=n.n(a),i=n(235),r=n.n(i),c=(n(250),n(251),n(236)),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,616)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))},u=n(7);r.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(c.a,{})})),o()}},[[613,1,2]]]);
//# sourceMappingURL=main.1b5ef078.chunk.js.map